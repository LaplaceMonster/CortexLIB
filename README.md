# 嵌入式系统/`MCU`外设驱动库，函数库

##  `STM32`

### `STM32F103`系列

#### 启动文件

使用MCU前需要配置必要的启动文件（一般MCU厂商会提供）

启动文件在 STM32F103 系列的嵌入式开发中起到了以下关键作用：

- **初始化堆栈和堆内存**：为系统运行提供必需的内存空间。
- **设置向量表**：定义了处理器复位后的程序流，以及异常和中断的处理程序。
- **支持中断机制**：为外部中断和系统中断提供处理程序的框架。
- **确保对齐和内存分配**：通过 `PRESERVE8` 和 `ALIGN` 确保内存按照适当的方式对齐。

#### **CMSIS（Cortex-M 系统接口库）**

**CMSIS** 是由 ARM 提供的一个针对 Cortex-M 微处理器的标准库，它提供了一些非常基础的系统功能支持，例如：

- 处理器的启动/复位代码
- 中断处理和中断向量表
- 系统定时器（SysTick）的支持
- 硬件抽象和访问标准寄存器（如 NVIC 配置）

CMSIS 库是 ARM Cortex-M 微控制器开发的标准组件之一。在开发中，通常需要包含 CMSIS 的头文件，它是编写嵌入式程序所必需的库之一。

#### 为啥有了启动文件还要CMSIS文件啊？

因为CMSIS文件是Cortex-M 系统接口库文件即所有的使用该内核的MCU都统一使用该文件进行初始化的配置，那么MCU厂商必然要和这个内核的系统接口进行耦合/适配。所以需要启动文件。

#### 实际配置案例：

下载好`STM32F103`系列的标准外设库后分为两大类：

1 `CMSIS/CM3/CoreSupport`文件夹

* 关于内核配置的文件，ARM公司统一编写

  `core_cm3.c`和`core_cm3.h`文件

2 `CMSIS/CM3/DeviceSupport`文件夹：设备的启动文件

* `CMSIS\CM3\DeviceSupport\ST\STM32F10x\startup`下对应的不同编译器

​		如`arm`,`gcc_ride7`,`iar`这些文件夹下对应的是具体的启动文件

##### 总结：

这个结构的设计思路就是内核的启动配置文件不变，而MCU厂商提供的启动文件（汇编代码.s）

* 要根据具体的MCU型号适配内核

* MCU适配不同编译器